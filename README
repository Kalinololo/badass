Router P2 explain :
     1ï¸âƒ£ Assignation dâ€™une adresse IP Ã  eth0
    ip addr add 10.1.1.1/24 dev eth0
    âœ… Pourquoi ?
    On assigne lâ€™adresse IP 10.1.1.1 avec un masque /24 (soit 255.255.255.0) Ã  lâ€™interface eth0.
    Cela permet Ã  la machine de communiquer avec d'autres machines dans le mÃªme sous-rÃ©seau (10.1.1.0/24).

    2ï¸âƒ£ CrÃ©ation de lâ€™interface VXLAN
    ip link add name vxlan10 type vxlan id 10 dev eth0 local 10.1.1.1 remote 10.1.1.2 dstport 4789
    âœ… Pourquoi ?
    On crÃ©e une interface virtuelle de type VXLAN, qui encapsule du trafic Ethernet dans des paquets UDP pour transporter du trafic Layer 2 (L2) sur un rÃ©seau Layer 3 (L3).

    ğŸ“Œ Explication des paramÃ¨tres :

    name vxlan10 â†’ Nom de lâ€™interface VXLAN.
    type vxlan â†’ Indique quâ€™il sâ€™agit dâ€™un tunnel VXLAN.
    id 10 â†’ Identifiant du VXLAN (VNI = VXLAN Network Identifier), utilisÃ© pour isoler plusieurs VXLANs.
    dev eth0 â†’ Interface physique qui transporte le VXLAN.
    local 10.1.1.1 â†’ Adresse IP locale du routeur qui envoie les paquets VXLAN.
    remote 10.1.1.2 â†’ Adresse IP de lâ€™autre extrÃ©mitÃ© du tunnel VXLAN (le second routeur par exemple).
    dstport 4789 â†’ Port UDP utilisÃ© pour le VXLAN (standard IANA).
    En gros, on crÃ©e un tunnel entre 10.1.1.1 et 10.1.1.2 qui va transporter du trafic de niveau 2.

    3ï¸âƒ£ Activation de lâ€™interface VXLAN
    ip link set dev vxlan10 up
    âœ… Pourquoi ?
    Lâ€™interface VXLAN est crÃ©Ã©e mais dÃ©sactivÃ©e par dÃ©faut. Cette commande lâ€™active.

    4ï¸âƒ£ CrÃ©ation dâ€™un bridge (br0)
    ip link add br0 type bridge
    âœ… Pourquoi ?
    On crÃ©e un switch virtuel (br0), qui va permettre dâ€™interconnecter des interfaces comme vxlan10 et eth1.
    Un bridge fonctionne comme un switch de niveau 2 : il apprend les adresses MAC et transfÃ¨re les paquets en fonction de la table MAC.

    5ï¸âƒ£ Activation du bridge
    ip link set dev br0 up
    âœ… Pourquoi ?
    Comme pour vxlan10, on active br0, sinon il ne fonctionnera pas.

    6ï¸âƒ£ Ajout des interfaces au bridge
    brctl addif br0 eth1
    brctl addif br0 vxlan10
    âœ… Pourquoi ?
    On connecte eth1 et vxlan10 au bridge br0, ce qui signifie :

    Tout le trafic venant de eth1 sera transfÃ©rÃ© via br0.
    Tout le trafic venant de vxlan10 passera aussi par br0.
    ğŸ”— Ce que Ã§a fait concrÃ¨tement :

    eth1 est probablement une interface connectÃ©e Ã  un rÃ©seau local.
    vxlan10 est un tunnel vers un autre routeur.
    Le bridge br0 permet d'interconnecter eth1 et vxlan10 comme s'ils Ã©taient dans le mÃªme switch.
    Cela permet de faire transiter du trafic de niveau 2 (MAC) entre des machines distantes via VXLAN.
    ğŸ“Œ RÃ©sumÃ© global
    Cette configuration :

    Assigne une IP Ã  eth0 pour permettre la communication.
    CrÃ©e un tunnel VXLAN entre 10.1.1.1 et 10.1.1.2 pour transporter du trafic Ethernet encapsulÃ© en UDP.
    Active le VXLAN et crÃ©e un bridge (br0).
    Ajoute eth1 et vxlan10 au bridge pour quâ€™ils puissent Ã©changer du trafic L2.
    â¡ï¸ Ã‡a permet dâ€™Ã©tendre un rÃ©seau Ethernet Ã  travers un tunnel VXLAN au-dessus dâ€™un rÃ©seau IP classique.

    ğŸ’¡ En gros, c'est comme si tu avais un long cÃ¢ble Ethernet virtuel entre tes deux routeurs, mÃªme s'ils sont situÃ©s sur des rÃ©seaux IP diffÃ©rents. ğŸš€